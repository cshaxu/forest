/*
 * This file was generated by the Gradle 'init' task.
 */

import com.github.jengelman.gradle.plugins.shadow.transformers.ServiceFileTransformer

plugins {
    // Apply the common convention plugin for shared build configuration between library and application projects.
    id 'forest.java-common-conventions'

    // Apply the application plugin to add support for building a CLI application in Java.
    id 'application'
}

dependencies {
    implementation platform('io.dropwizard:dropwizard-bom:4.0.0')
    implementation 'io.dropwizard:dropwizard-core'
    implementation 'com.google.inject:guice:7.0.0'
}

shadowJar {
    transform(ServiceFileTransformer)
    exclude 'META-INF/*.DSA'
    exclude 'META-INF/*.RSA'
}

task runServer(type: JavaExec) {
    classpath = sourceSets.main.runtimeClasspath
    mainClass = application.mainClass

    // arguments to pass to the application
    args 'server', '_infra/server.yml'
}
